---
language: python

env:
  matrix:
    - IMAGE=debian-8-x64

install:
  - gem install tugboat
  - echo "---" > .tugboat
  - echo "authentication:" >> .tugboat
  - echo "  access_token: ${DO_API_TOKEN}" >> .tugboat
  - tugboat create ${IMAGE} -i ${IMAGE} -r ams2 -s 512 -k 914738
  - ip=$(tugboat info -n ${IMAGE} --porcelain -attribute ip)

script:
  - ping -c 60 ${ip}

after_script:
  - tugboat destroy ${IMAGE}

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  email: false
