---
language: python

env:
  matrix:
    - IMAGE=centos-6-x64
    - IMAGE=centos-7-x64
    - IMAGE=coreos-alpha
    - IMAGE=coreos-stable
    - IMAGE=debian-7-x64
    - IMAGE=debian-8-x64
    - IMAGE=debian-9-x64
    - IMAGE=fedora-24-x64
    - IMAGE=fedora-25-x64
    - IMAGE=fedora-26-x64
    - IMAGE=ubuntu-14-04-x64
    - IMAGE=ubuntu-17-04-x64
    - IMAGE=ubuntu-17-10-x64

install:
  - gem install tugboat
  - sed -i s/DO_API_TOKEN/${DO_API_TOKEN}/ .tugboat
  - tugboat create ${IMAGE} -i ${IMAGE} -r ams3 -s 512mb -k 914738
  - ip=$(tugboat info -n ${IMAGE} --porcelain -attribute ip)

script:
  - ping -c 60 ${ip}

after_script:
  - tugboat destroy ${IMAGE}

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  email: false
